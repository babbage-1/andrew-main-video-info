config:
  target: "http://localhost:2000/main"
  phases:
    - duration: 120
      arrivalRate: 10
      rampTo: 50
      name: "Warm up the application"
    - duration: 600
      arrivalRate: 50
      name: "Sustained max load"
  defaults:
    headers:
      # x-my-service-auth: '987401838271002188298567'
  payload:
    path: "newrelicId.csv"
    fields:
      - "id"
    skipHeader: true
  http:
    pool: 20
  ensure:
    maxErrorRate: 1


scenarios:
  - name: "GET requests"
    weight: 19
    flow:
      # - loop:
      #   - get:
      #       url: "/{{ id }}/read"
      #   count: 20
      - loop:
        - post:
            url: "/{{ id }}/create"
            json:
              name: "adipisci sit at"
              genre: "Romance|Fantasy"
              score: "3"
              runtime: "157"
              rating: "PG"
              releaseday: "23"
              releasemonth: "June"
              releaseyear: "1994"
              image: "https://s3.us-east-2.amazonaws.com/sdc-andrew-movie-posters/--anoWjsY-8.jpg"
        count: 10
